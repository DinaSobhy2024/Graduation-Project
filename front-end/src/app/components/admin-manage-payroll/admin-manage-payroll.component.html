
<section class="py-2">
  <h1 class="my-3 mx-2 fw-bold">Generate Payrolls</h1>
  <form [formGroup]="userForm" (ngSubmit)="generateForm()">
    <div class="my-2 row mx-3 w-75">
      <div class="col-md-2">
        <input
          type="text"
          class="form-control py-2 text-center"
          placeholder="Name"
          formControlName="name"
        />
      </div>
      <div class="col-md-2">
        <input
          type="text"
          class="form-control py-2 text-center"
          placeholder="Month"
          formControlName="month"
        />
      </div>
      <div class="col-md-2">
        <input
          type="text"
          class="form-control py-2 text-center"
          placeholder="Year"
          formControlName="year"
        />
      </div>

      <div class="col-md-2">
        <input
          type="text"
          class="form-control py-2"
          placeholder="Allowance"
          formControlName="allowance"
        />
      </div>
      <div class="col-md-2">
        <input
          type="text"
          class="form-control py-2 text-center"
          placeholder="Deduction"
          formControlName="deduction"
        />
      </div>
      <div class="col-md-2">
        <button class="btn btn-main">Generate</button>
      </div>
    </div>
  </form>

  <h2 class="mt-5 mb-3 fw-bold mx-2">Payrolls</h2>
  <div class="my-2 row mx-3 justify-content-center">
    <div class="col-md-1">
      <input
        type="text"
        class="form-control py-2 text-center"
        placeholder="Status"
        [(ngModel)]="status"
        (input)="onSearchInput()"
      />
    </div>
    <div class="col-md-1">
      <input
        type="text"
        class="form-control py-2 text-center"
        placeholder="Name"
        [(ngModel)]="name"
        (input)="onSearchInput()"
      />
    </div>
    <div class="col-md-1">
      <input
        type="text"
        class="form-control py-2 text-center"
        placeholder="Month"
        [(ngModel)]="month"
        (input)="onSearchInput()"
      />
    </div>
    <div class="col-md-1">
      <input
        type="text"
        class="form-control py-2 text-center"
        placeholder="Year"
        [(ngModel)]="year"
        (input)="onSearchInput()"
      />
    </div>

    <div class="col-md-4">
      <button class="btn btn-search me-auto text-white" (click)="handleForm()">
        <i class="fa-solid fa-magnifying-glass fs-7 px-2 my-1"></i>Search
      </button>
    </div>
  </div>

  <table class="table text-center my-4 mx-2">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Basic</th>
        <th>Month</th>
        <th>Year</th>
        <th>Total</th>
        <th>summary</th>
        <th>Status</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of payrolls">
        <td>{{ item.id }}</td>
        <td>{{ item.name }}</td>
        <td>{{ item.basic }} EGP</td>
        <td>{{ item.month }}</td>
        <td>{{ item.year }}</td>
        <td>{{ item.total }} EGP</td>


<td>
          <div class="dropdown px-5">
            <button
              class="btn"
              type="button"
              id="dropdownMenuButton1"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="fa-solid fa-ellipsis fs-5"></i>
            </button>
            <ul
              class="dropdown-menu px-3"
              aria-labelledby="dropdownMenuButton1 "
            >
              <p>
                Basic:
                <span class="text-muted mx-1">{{ item.basic }}</span>
              </p>
              <hr>
              <p>
                +Allowance:
                <span class="text-muted mx-1">{{ item.allowance }}</span>
              </p>
              <p>
                +Extra Attend.:
                <span class="text-muted mx-1">{{ item.extra_attendance }}</span>
              </p>
              <p>
                +Done RE:
                <span class="text-muted mx-1">{{ item.done_RE }}</span>
              </p>
              <p>
                -Deduction:
                <span class="text-muted mx-1">{{ item.deduction }}</span>
              </p>
              <p>
                -Absent Attend.:
                <span class="text-muted mx-1">{{
                  item.absent_attendance
                }}</span>
              </p>
              <hr>
              <p>
                Total:
                <span class="text-muted mx-1">{{ item.total }}</span>
              </p>
            </ul>
          </div>
        </td>
        <td>{{ item.status }}</td>
        <td>
          <button class="btn text-info" (click)="getPay(item.id)">
            <i class="fa-solid fa-file-invoice-dollar mx-1 fs-6"></i>Pay
          </button>
          <button class="btn" (click)="delete(item.id)">
            <i class="fa-regular fa-trash-can mx-1 fs-6"></i>Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</section>
